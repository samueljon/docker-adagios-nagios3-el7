{
  "name": "docker-adagios-nagios3-el7",
  "tagline": "Adagios web interface with Nagios3 and CentOS7 in Docker container",
  "body": "## Introduction\r\n\r\nThis is adapted from [pschmitt/adagios](https://github.com/pschmitt/docker-adagios) and included the following features:\r\n\r\n* **centos:7** base image\r\n* timezone environment setting\r\n* use your own **SSL certificate** or self signed SSL certificate\r\n* **lighttpd** with **fastcgi** for low memory server\r\n* **uwsgi** to host adagios application\r\n* **nagios3** from CentOS Cloud SIG repo \r\n* **adagios** from git instead of old prebuilt rpms\r\n* **nagios mobile** web interface\r\n* automatic nagios configurations backup and restore\r\n* sample nagios plugins checks via ssh scripts\r\n* **postfix** for sending nagios alerts email\r\n\r\n## Usage notes\r\n\r\nThere are sample nagios plugins checks via ssh scripts located in **_opt/_** directory, as well as the shell script that install these plugins.  Copy them to **_/opt_** volume, then add the necessary commands/services for the plugins via Adagios interface.\r\n\r\n`custom-init-sample.sh` is kept as example alternative.\r\n\r\nIt is strongly advisable to pre-generate passphraseless SSH public key to be stored in the nagios user home directory when using these nagios plugins.\r\n\r\nMake sure to customise **_/etc/postfix/main.cf_** to send out nagios alerts email.\r\n\r\nPlease review and edit `docker-adagios.service` systemd service file before use.\r\n\r\n## Variables\r\n\r\n- **ADAGIOS_HOST** : Hostname (Default: localhost)\r\n- **ADAGIOS_USER** : Username for accessing the adagios web interface (Default: nagiosadmin)\r\n- **ADAGIOS_PASS** : Password for accessing the adagios web interface (Default: P@ssw0rd)\r\n- **GIT_REPO** : Whether /etc/nagios should be kept in a git repo. (Default: false)\r\n- **LOCALTIMEZONE** : Time zone name used in value of TZ environment variable (Default: UTC)\r\n- **SSLCERT** : path and name of the PEM file for SSL support, it should contain both the private key and the certificate. (Default: /etc/pki/tls/certs/localhost.pem self signed)\r\n\r\n## Volumes\r\n\r\n- /etc/adagios\r\n- /etc/nagios\r\n- /var/lib/pnp4nagios\r\n- /var/log/nagios\r\n- /opt\r\n\r\n## Complete Example\r\n\r\n```bash\r\ndocker build -t uqwhsu/adagios --rm=true --force-rm=true .\r\n\r\ndocker run -d -h nagios -p 80:80 -p 443:443 \\\r\n  -e ADAGIOS_USER=nagiosadmin \\\r\n  -e ADAGIOS_PASS=nagiosP@ssw0rd \\\r\n  -e GIT_REPO=true \\\r\n  -e LOCALTIMEZONE=Australia/Brisbane\r\n  -v ~/dev/docker/adagios/data/adagios:/etc/adagios \\\r\n  -v ~/dev/docker/adagios/data/nagios:/etc/nagios \\\r\n  -v ~/dev/docker/adagios/data/pnp4nagios:/var/lib/pnp4nagios \\\r\n  -v ~/dev/docker/adagios/data/log:/var/log/nagios \\\r\n  -v ~/dev/docker/adagios/data/opt:/opt \\\r\n  -v ~/dev/docker/adagios/data/.ssh:/var/spool/nagios/.ssh \\\r\n  -v ~/dev/docker/adagios/data/main.cf:/etc/postfix/main.cf \\\r\n  uqwhsu/adagios\r\n```\r\nAfter starting the container you can visit <http://localhost/> or <http://192.168.59.103> if you use boot2docker. \r\n\r\n\r\n## TODO\r\n\r\nuse git revert or reset to roll back from failed nagios configuration.\r\n\r\n## Bonus\r\n\r\nPlease see GitLab CE CentOS:6 Docker project: [docker-gitlabce-el6](https://github.com/uqwhsu/docker-gitlabce-el6)",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}